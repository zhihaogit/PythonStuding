## 第九章:vim程序编辑器

- vim是一种程序编辑器

### 9.1 vi与vim

- 在 Linux中的大部分配置文件都是以 ASCII的纯文本形态存在的

#### 9.1.1 为何要学 vim

- 使用的原因
  - 所有的 Unix Like系统都内置 vi
  - 很多软件的编辑接口都主动调用 vi
  - vim具有程序编辑的能力，能用字体颜色分辨语法的正确性
  - 运行速度快，程序简单
- vim是 vi的进阶版本

### 9.2 vi的使用

- 一般指令模式(command mode)
- 编辑模式(insert mode)
	- `i,I,o,O,a,A,r,R` 进入编辑模式
	- Esc退出
- 命令行命令模式(command-line mode)

#### 9.2.1 简易执行范例

1. 使用 “vi filename”进入一般指令模式
	- eg: `/bin.vi welcome.txt`
	- 在 centos7中，一般账号 vim取代了 vi，所以使用绝对路径执行
2. 按下 i进入编辑模式，开始编辑文字
3. 按下 [Esc]回到一般指令模式
4. 进入命令行界面，文件储存并离开 vi环境

#### 9.2.2 按键说明

- 第一部分：一般指令模式可用的按键

| 移动光标的方法        |                                            |
| --------------------- | ------------------------------------------ |
| h或 <-                | 向左移动一个字符                           |
| j或 向下方向键        | 向下移动一个字符                           |
| k或 向上方向键        | 向上移动一个字符                           |
| l或 ->                | 向右移动一个字符                           |
| Ctrl + f              | 向下翻一页                                 |
| Ctrl + b              | 向上翻一页                                 |
| Ctrl + d              | 向下翻半页                                 |
| Ctrl + u              | 向上翻半页                                 |
| +                     | 光标移动到非空白字符的下一列               |
| -                     | 光标移动到非空白字符的上一列               |
| n<space>              | 移动到光标所在行的第几个字符               |
| 0或[home]             | 移动到这一列的最前面字符                   |
| $或[End]              | 移动到这一列的最后面字符                   |
|                       | 光标移动到屏幕最上方列的第一个字符         |
| M                     | 光标移动到屏幕中央列的第一个字符           |
| L                     | 光标移动到屏幕最下方列的第一个字符         |
| G                     | 光标移动到这个文件的最后一列               |
| nG                    | 移动到文件的第 n列                         |
| gg                    | 移动到文件的第一列                         |
| n<Enter>              | 向下移动 n列                               |
| /word                 | 向光标之下寻找字符串                       |
| ?word                 | 向光标之上寻找字符串                       |
| n                     | 英文按键，重复前一次向上的寻找动作         |
| N                     | 英文按键，重复前一次向下的寻找动作         |
| :n1,n2s/word1/word2/g | n1,n2为数字,代表行数,搜寻word1,用word2替换 |
| :1,$s/word1/word2/g   | 从第一行搜寻到最后一行，并替换             |
| :1,$s/word1/word2/gc  | 搜寻并提示用户是否取代                     |
| x,X                   | x向后删除一个字符，X向前删除一个字符       |
|                       | n为数字，连续向后删除n个字符               |
| dd                    | 删除光标所在行                             |
| ndd                   | n为数字，删除光标所在的向下n行             |
| d1G                   | 删除光标所在到第一行的所有数据             |
| dG                    | 删除光标所在到最后一行的所有数据           |
| d$                    | 删除光标所在到该行的最后一个字符           |
| d0                    | 数字0，删除光标所在到该行的第一个字符      |
| yy                    | 复制光标所在行                             |
| nyy                   | 复制光标所在的向下 n行                     |
| y1G                   | 复制光标所在到第一行的所有数据             |
| yG                    | 复制光标所在到最后一行的所有数据           |
| y0                    | 复制光标所在字符到行首的数据               |
| y$                    | 复制光标所在字符到行尾的数据               |
| p,P                   | p在下一行粘贴，P在上一行粘贴               |
| J                     | 合并光标所在行与下一行                     |
| c                     | 重复删除多个数据，如10cj,向下删除10行      |
| u                     | 复原上一个操作                             |
| Ctrl + r              | 重做上一个操作                             |



- 第二部分：一般指令模式切换到编辑模式的可用按钮说明

| 进入插入或取代的编辑模式 |                                                          |
| ------------------------ | -------------------------------------------------------- |
| i,I                      | 进入 insert mode，在光标处开始输入                       |
| a,A                      | 进入 insert mode，在光标所在行的最后一个字符开始输入     |
| o,O                      | 进入 insert mode，在光标所在行的下面插入一个新行开始输入 |
| r,R                      | 进入 insert mode，取代光标处的字符，开始输入             |
| [Esc]                    | 退出 insert mode，进入一般指令模式                       |



- 第三部分: 一般指令模式切换到命令行界面的可用按钮说明

| 命令行界面的储存、离开等指令 |                                          |
| ---------------------------- | ---------------------------------------- |
| :w                           | 储存数据                                 |
| :w!                          | 强制储存数据，跟权限有关系               |
| :q                           | 离开 vi                                  |
| :wq                          | 储存数据并退出，:wq!强制退出，不保留修改 |
| ZZ                           | 有更改就储存退出，没有更改就不储存但退出 |
| :w[filename]                 | 另存为 新文件                            |
| :r[filename]                 | 读入另一个文件的数据，添加到光标后面     |
| :n1,n2 w[filename]           | 截取 n1,n2的内容储存成新文件             |
| :! command                   | 强制执行命令                             |
| :set nu                      | 显示行号                                 |
| :set nonu                    | 不显示行号                               |

